<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="The Batuhan's Blog" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="The Batuhan's Blog" /> <title> Recreating Optiplex Server - The Batuhan's Blog </title> <link rel="alternate" href="https://thebatuhansnetwork.xyz/recreating-optiplex-server/" hreflang="en-US" /> <link rel="canonical" href="https://thebatuhansnetwork.xyz/recreating-optiplex-server/" /> <meta name="description" content="Hi there! I&#39;m Batuhan and this is The Batuhan&#39;s Blog." /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Recreating Optiplex Server | Batuhan Y. Yılmaz" /> <meta property="og:title" content="Recreating Optiplex Server | Batuhan Y. Yılmaz" /> <meta property="og:type" content="website" /> <meta property="og:url" content="https://thebatuhansnetwork.xyz/recreating-optiplex-server/" /> <meta property="og:description" content="Hi there! I&#39;m Batuhan and this is The Batuhan&#39;s Blog." /> <meta property="og:image" content="https://thebatuhansnetwork.xyz/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Recreating Optiplex Server | twitter_username" /> <meta name="twitter:url" content="https://thebatuhansnetwork.xyz/recreating-optiplex-server/" /> <meta name="twitter:site" content="@twitter_username" /> <meta name="twitter:creator" content="@twitter_username" /> <meta name="twitter:description" content="Hi there! I&#39;m Batuhan and this is The Batuhan&#39;s Blog." /> <meta name="twitter:image" content="https://thebatuhansnetwork.xyz/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="https://thebatuhansnetwork.xyz/feed.xml" title="The Batuhan's Blog" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="/about/">about</a><a class="menu-link" href="https://www.buymeacoffee.com/bthyilmaz" target="_blank" rel="noopener" >buy me a coffee!</a ></div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <h1 class="header-title" itemprop="headline">Recreating Optiplex Server</h1> <div class="post-meta"> <time datetime="2023-05-08T00:00:00+01:00" itemprop="datePublished"> May 08, 2023 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name"></span> </span> <time hidden datetime="" itemprop="dateModified"> May 08, 2023 </time> <span hidden itemprop="publisher" itemtype="Person"></span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>2 weeks ago I got myself 2 used Optiplexes and my idea with them was recreating my old setup and today I’m going to recreate my Optiplex Server. Before creating it I planned my use cases.</p> <ol> <li>A webserver inside a Debian VM</li> <li>A Nextcloud server inside Ubuntu Server 22.04 VM</li> <li>SMB server for file sharing on local</li> <li>A Minecraft server running bare metal</li> <li>And some tiny services like dashy and uptime kuma inside a Arch VM. (I use arch btw) These were the summary of things I planned to run on this server. So for that I needed to find the perfect OS for it. What I mean by that is, it should be optimized for virtualisation and it should be stable. And for these reasons I decided to go with Rocky Linux 9.1. I went their website, downloaded iso, burned using balenaEtcher and step 1 was completed. !<img src="https://cdn.discordapp.com/attachments/789025765055791104/1105173951015035091/DBBB546C-E464-4A43-95F2-9B06204311BA.png" alt="etcher" /></li> </ol> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>2 weeks ago I got myself 2 used Optiplexes and my idea with them was recreating my old setup and today I’m going to recreate my Optiplex Server. Before creating it I planned my use cases.</p> <ol> <li>A webserver inside a Debian VM</li> <li>A Nextcloud server inside Ubuntu Server 22.04 VM</li> <li>SMB server for file sharing on local</li> <li>A Minecraft server running bare metal</li> <li>And some tiny services like dashy and uptime kuma inside a Arch VM. (I use arch btw) These were the summary of things I planned to run on this server. So for that I needed to find the perfect OS for it. What I mean by that is, it should be optimized for virtualisation and it should be stable. And for these reasons I decided to go with Rocky Linux 9.1. I went their website, downloaded iso, burned using balenaEtcher and step 1 was completed. !<img src="https://cdn.discordapp.com/attachments/789025765055791104/1105173951015035091/DBBB546C-E464-4A43-95F2-9B06204311BA.png" alt="etcher" /></li> </ol> <p>Step 2 was finding an suitable OS drive. At the beginning I considered using a USB3.0 32GB USB stick but than I saw that these usb sticks were good at storing files but not at randomly accsesing them. I tried installing Debian onto this 32GB Kioxia USB 3.0 stick and it ran slow as hell. And becouse of that I decided to go with an SSD and I brought out a 240GB Crucial BX500 for that !<img src="https://cdn.discordapp.com/attachments/789025765055791104/1105173950578835566/A959E34E-8708-4BBC-ACF6-8079C1D5F5CB.jpeg" alt="SSD and Optiplex server" /> I preferred this SSD becouse it was my best option for it’s price. Thing makes this SSD better is it’s dram. Dram is important for random acsessing the data on drive and since I’m gonna run bunch of different virtual machines on it at the same time, it’s a feature that I need. Also when compared to it’s dramless same priced alternatives like WD Green. After installing Rocky Linux 9 I greeted with the beautiful Gnome 40 desktop and it was ready to go. All things I needed (QEMU, Virt-Manager, Cockpit, HTTPD, OpenSSL, Samba) was installed upon installation since I selected them and only thing I needed to do was condfiguring them.</p> <h2 id="configration"> <a href="#configration" class="anchor-head"></a> Configration </h2> <p>My another reason for going with Rocky Linux was using terminal minimal as possible. Becouse since this OS is designed to be fast, production ready and easy to use I wanted to done most of the configration like users and samba shares over at Cockpit webui and for that I installed the cockpit-shares and cockpit-identification plugins and I’ve done configuring Samba without entering a single command. But of course when it comes to other parts such as setting up the Debian VM and other stuff I needed command line and here comes it.</p> <h3 id="debian-vm"> <a href="#debian-vm" class="anchor-head"></a> Debian VM </h3> <blockquote> <p>A webserver inside a Debian VM <img src="https://cdn.discordapp.com/attachments/789025765055791104/1105173951476416616/Screenshot_2023-05-07_at_22.34.03.png" alt="CockpitUI" /> As you can see on top I’ve created a tiny VM and it’s been serving as my webserver since the day I posted <a href="https://thebatuhansnetwork.xyz/the-page-you-currently-in/">this post</a> and you’re proably reading this from that virtual machine too. <img src="https://cdn.discordapp.com/attachments/789025765055791104/1105173951749038230/Screenshot_2023-05-07_at_22.35.18.png" alt="Htop" /></p> </blockquote> <p>As you can see only 84MB of ram usage! While setting this VM up I’ve gone with less things installed as possible and when the setup has finished I had a very simple OS with base system and nothing more. Than I installed some stuff I needed for Jekyll ,apache2 and openssh-server becouse ssh doesn’t uses too much memory and it’s just easier for me to ssh in instead of opening a VNC client and connecting to VM. Since it doesn’t has a GUI. You may ask if this VM is that simple, what brings this website to me? Well answer is simple. It’s CloudFlare tunnel. I’ve installed it into servers itself and than created a Virtual network for this VM so it’s reachable from server and than I used it’s virtual IP and it worked! With that Crucial SSD booting this VM only takes a seconds and feels same as running a container.</p> <h3 id="ubuntu-server"> <a href="#ubuntu-server" class="anchor-head"></a> Ubuntu Server </h3> <blockquote> <p>A Nextcloud server inside Ubuntu Server 22.04 VM</p> </blockquote> <p>Configuring Ubuntu Server VM was very simple. I just used the Nextcloud Snap package for it and with sime tiny configrations it was done. I’m not actually a fan of snaps becouse they’re bloaed as hell and runs much slower when compared to it’s alternative Faltpaks but since this VMs only purpose is Nextcloud I’m completely fine with it. I gaved the same amount of resources expect sotrage and usage on this VM is way more than other one like 400Mb while idling but this was expected and even under load it doesn’t goes higher than 800Mbs and I’m happy with it.</p> <h3 id="extras"> <a href="#extras" class="anchor-head"></a> Extras </h3> <p>And I’ve installed some extras like Resillio Sync for file synchronising, Xrdp for be able to login to GUI remotely and autoSSH for port forwarding to a VPS.</p> <p>In a summary this was it guys. Of course things went more complicated and I tried to keep it simple. I’m planning to host myself a <a href="https://sr.ht/~tsileo/microblog.pub/">microblog.pub</a> instance like <a href="https://qrk.social/">Kev Quirk</a> and a <a href="https://sr.ht/~thecashewtrader/minv/">minv</a> server but for now I don’t have enough time to do these but when I do I’m gonna keep you guys updated about it. If you have any questions or need support for your server you can come and check out our <a href="https://discord.gg/5p27ZdzQzF">Discord server</a> .</p> <h2 id="reply-via-e-mail"> <a href="#reply-via-e-mail" class="anchor-head"></a> Reply via <a href="mailto://batuhan@thebatuhansnetwork.xyz">e-mail</a> </h2> <h2 id="thank-you"> <a href="#thank-you" class="anchor-head"></a> Thank You! </h2> <p>Batuhan Yılmaz - 08.05.2023 - 16/100</p> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/today-is-6-may-2023/" > <div class="nav-arrow">Previous</div> <span class="post-title">Today is 6 May 2023</span> </a> <a class="post-nav-item post-nav-next" href="/it-was-firewall/"> <div class="nav-arrow">Next</div> <span class="post-title">It Was Firewall</span> </a> </nav> <footer class="footer"> <a class="footer_item" href="/thanks">ack.</a> <a class="footer_item" href="/links">links</a> <a class="footer_item" href="/blogroll">blogroll</a> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2023</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> This blog has created using <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
