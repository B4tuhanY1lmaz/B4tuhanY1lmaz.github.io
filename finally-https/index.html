<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="The Batuhan's Blog" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="The Batuhan's Blog" /> <title> Finally HTTPS! - The Batuhan's Blog </title> <link rel="alternate" href="http://thebatuhansnetwork.xyz/finally-https/" hreflang="en-US" /> <link rel="canonical" href="http://thebatuhansnetwork.xyz/finally-https/" /> <meta name="description" content="The Batuhan&#39;s Blog" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Finally HTTPS! | Batuhan Yılmaz" /> <meta property="og:title" content="Finally HTTPS! | Batuhan Yılmaz" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://thebatuhansnetwork.xyz/finally-https/" /> <meta property="og:description" content="The Batuhan&#39;s Blog" /> <meta property="og:image" content="http://thebatuhansnetwork.xyz/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Finally HTTPS! | twitter_username" /> <meta name="twitter:url" content="http://thebatuhansnetwork.xyz/finally-https/" /> <meta name="twitter:site" content="@twitter_username" /> <meta name="twitter:creator" content="@twitter_username" /> <meta name="twitter:description" content="The Batuhan&#39;s Blog" /> <meta name="twitter:image" content="http://thebatuhansnetwork.xyz/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://thebatuhansnetwork.xyz/feed.xml" title="The Batuhan's Blog" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="/about/">about</a><a class="menu-link" href="https://www.buymeacoffee.com/bthyilmaz" target="_blank" rel="noopener" >buy me a coffee!</a ><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <h1 class="header-title" itemprop="headline">Finally HTTPS!</h1> <div class="post-meta"> <time datetime="2023-01-23T00:00:00+00:00" itemprop="datePublished"> Jan 23, 2023 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Batuhan Yılmaz</span> </span> <time hidden datetime="" itemprop="dateModified"> Jan 23, 2023 </time> <span hidden itemprop="publisher" itemtype="Person"></span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>Hello everyone, I’m Batuhan and today I’m going to talk about how did I got the HTTPS working with my web server over cloudflare tunnel. Before starting that tutorial I should say that what works for me may not work for you, so please think before following these steps, in any case you can always come to our <a href="https://discord.gg/5p27ZdzQzF">discord server</a> from the About page and get more help from there. So without any further words lets go.</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>Hello everyone, I’m Batuhan and today I’m going to talk about how did I got the HTTPS working with my web server over cloudflare tunnel. Before starting that tutorial I should say that what works for me may not work for you, so please think before following these steps, in any case you can always come to our <a href="https://discord.gg/5p27ZdzQzF">discord server</a> from the About page and get more help from there. So without any further words lets go.</p> <h2 id="why-im-creating-this-blogpost-its-just-too-easy"> <a href="#why-im-creating-this-blogpost-its-just-too-easy" class="anchor-head"></a> Why I’m creating this blogpost it’s just too easy. </h2> <ul> <li>I can hear you saying that becouse it’s really easy to create a certificate and use with your domain when it comes to the Cloudflare and Cloudflare Tunnel. When you enable it from the Cloudflare dashboard, it encrypts everything for you, and it just works generally. But when it comes to hosting my web archive using Apache 2 with zero extra configuration, things become a bit problematic with resulting in mixed content and a website that doesn’t work.</li> </ul> <p><img src="https://archive.thebatuhansnetwork.xyz/Media/Images/blog/Screenshot%202022-04-02%20at%2010.53.34.png" alt="Mixed content error" /></p> <ul> <li>The error that you’re currently seeing above this text was the main reason why I didn’t had HTTPS until now. At the beginning I was tried everything at the Cloudflare side to fix it but nothing has worked until I realised that main problem was at the server side. As I said at the beginning of the post, the server side was just a zero configration apache2 installation and was using the http protocol. And this was a problem for the Cloudflare and the browsers becouse while the main content is being served as https other stuff as well as the files and medias was still on the http and this was the problem.</li> <li>The fix was actually too simple and after fixing it just inside 3 minutes I just kept thinking “Why the fuck I wasn’t knew that before!?”. But yeah I fixed it in the end :).</li> </ul> <h2 id="how-did-i-fix-it"> <a href="#how-did-i-fix-it" class="anchor-head"></a> How did I fix it? </h2> <ul> <li>So let’s come to the part where contains the fix. It’s very simple and as I said before it only takes like 3 minutes to fix it. So here is the step by step guide:</li> </ul> <p>Step 1 - Update the apache2 and OpenSSL into latest version avabile:</p> <ol> <li>First you have to make sure that you have the latest version of the Apache2 and OpenSSL installed on your server just in case and for that just use the commands below to update them to latest version. <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt update
sudo apt install apache2 openssl
</code></pre></div> </div> </li> </ol> <p>Step 2 - Generate your certificates from Cloudflare Dashboard</p> <ol> <li>Now go to your Cloudflare Dashboard and login. After that select your domain and go to the SSL/TLS section from the sidebar. <img src="https://archive.thebatuhansnetwork.xyz/Media/Images/blog/Screenshot%202022-12-02%20at%2022.58.50.png" alt="" /> In this page select the Full encryption for the best result.</li> <li>After enabling the encryption go to the origin server section from the sidebar and create a certificate for your server. This certificate is gonna be used for the HTTPS and vertification of our server by the Cloudflare Tunnel.</li> </ol> <p><img src="https://archive.thebatuhansnetwork.xyz/Media/Images/blog/Screenshot%202022-12-02%20at%2023.04.33.png" alt="" /></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>To create your certificate  press on the Create Certificate button and follow the pages.

![](https://archive.thebatuhansnetwork.xyz/Media/Images/blog/Screenshot%202022-12-02%20at%2023.04.48.png)
</code></pre></div></div> <p>Press to the create button at the bottom and you should be able to see the page below.</p> <p><img src="https://archive.thebatuhansnetwork.xyz/Media/Images/blog/Screenshot%202022-12-02%20at%2023.06.08.png" alt="" /></p> <p>Now Cloudflare gives us 2 very random looking text outputs over there, the top one is your public certificate and the bottom one is your private key. Please make sure you saved them locally to your computer before pressing to the blue button, becouse as the name suggests the private key is private and Cloudflare doesn’t stores it for you and you won’t be able to see it again. And you have to save it to somewhere you know becouse it’s needed for HTTPS. Now after creating your certificate and saving it on somewhere safe on your computer, it’s time to log into our server and configure the apache2.</p> <p><img src="https://archive.thebatuhansnetwork.xyz/Media/Images/blog/Screenshot%202023-01-04%20at%2012.25.18.png" alt="" /></p> <p>Now change your dir into <code class="language-plaintext highlighter-rouge">/etc/apache2</code>and create a folder named Certificates with the command below</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /etc/apache2 &amp;&amp; mkdir certificates
</code></pre></div></div> <p>After that place the certificates that you’ve saved your computer to that folder. The important thing is do not save the public and private key into same file! I suggest you to save the public key as <code class="language-plaintext highlighter-rouge">domain.key.pub</code> and the private key as <code class="language-plaintext highlighter-rouge">domain.key</code>. This will make managing your certificates for the different websites if you’re hosting multiple sites on the same machine like me.</p> <p><img src="https://archive.thebatuhansnetwork.xyz/Media/Images/blog/Screenshot%202023-01-23%20at%2022.33.27.png" alt="" /></p> <p>And now, the only thing has left is to add these certs to our websites and it’s actually very easy. First you have to enable the ssl plugin of the apache and than add these certs to our website’s config file. To enable the Apache2’s ssl and rewrite plugin use the command I put down below.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo a2enmod ssl &amp;&amp; sudo a2enmod rewrite
</code></pre></div></div> <p>after running that command go to your websites config and add these 3 lines to your config.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SSLEngine on
SSLCertificateFile /etc/apache2/certs/&lt;your-cert.crt&gt;
SSLCertificateKeyFile /etc/apache2/certs/&lt;your-key.key&gt;
</code></pre></div></div> <p>Make sure that these lines are placed under the VirtualHost tag, otherwise Apache won’t gonna use our certs and we’ll end with the same situation which we don’t want. So after that it’s done. Now restart the Apache and you’re ready to go!</p> <p>This is how I get my https working on my server with Cloudflare Tunnel and apache2 I hope this post helps to you in any case you can always come to our <a href="https://discord.gg/5p27ZdzQzF">discord server</a> and get more help from there.</p> <h2 id="thank-you"> <a href="#thank-you" class="anchor-head"></a> Thank You! </h2> <p>Batuhan Yılmaz - 23.01.2023 - 3/10</p> </div> </article> </main> <section class="webring"> <h3>Recent posts from Blogs I follow</h3> <section class="articles"> <div class="article"> <h4 class="title"> <a href="https://andy-bell.co.uk/why-pay-8-for-a-check-mark-when-you-can-get-one-for-for-free/" target="_blank" rel="noopener">Why pay $8 for a checkmark when you can get one for free?</a> </h4> <p class="summary">Elon Musk has removed check marks from everyone now on Twitter, so I thought I&#39;d make a web component so you can add one wherever you want!</p> <small class="source"> via <a href="https://andy-bell.co.uk">Andy Bell</a> </small> <small class="date">April 22, 2023</small> </div> <div class="article"> <h4 class="title"> <a href="https://kevquirk.com/moving-from-jekyll-to-blot" target="_blank" rel="noopener"> Moving from Jekyll to Blot </a> </h4> <p class="summary"> I’ve been exploring Blot lately. It’s great, so I’ve decided to move this site over to it from Jekyll. I recently wrote about whether my current setup was good enough and whether I should move over to Blot for my blogging platform. Now, I …</p> <small class="source"> via <a href="https://kevquirk.com"> Kev Quirk </a> </small> <small class="date">April 19, 2023</small> </div> <div class="article"> <h4 class="title"> <a href="https://joelchrono12.xyz/blog/march-2023-summary/" target="_blank" rel="noopener">March 2023 Summary</a> </h4> <p class="summary">I can&#39;t believe another month went by. Here&#39;s my media consumption this time around! March was a crazy month indeed.</p> <small class="source"> via <a href="https://joelchrono12.xyz/">Joelchrono12</a> </small> <small class="date">April 1, 2023</small> </div> </section> <p class="attribution"> Generated by <a href="https://git.sr.ht/~sircmpwn/openring">openring</a> </p> </section> <style> .webring .articles { display: flex; flex-wrap: wrap; margin: -0.5rem; } .webring .title { margin: 0; } .webring .article { flex: 1 1 0; display: flex; flex-direction: column; margin: 0.5rem; padding: 0.5rem; background: #131418; min-width: 10rem; } .webring .summary { font-size: 0.8rem; flex: 1 1 0; } .webring .attribution { text-align: right; font-size: 0.8rem; color: #555; } </style> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/beginning-of-the-100daystooffload/" > <div class="nav-arrow">Previous</div> <span class="post-title">Beginning of the #100DaysToOffload</span> </a> <a class="post-nav-item post-nav-next" href="/its-time-for-personal-blogs-to-make-a-comeback/"> <div class="nav-arrow">Next</div> <span class="post-title">It's time for personal blogs to make a comeback</span> </a> </nav> <footer class="footer"> <a class="footer_item" href="/thanks">ack.</a> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2023</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> <!-- Matomo Image Tracker--> <img referrerpolicy="no-referrer-when-downgrade" src="https://a.thebatuhansnetwork.xyz/matomo.php?idsite=1&amp;rec=1" style="border:0" alt="" /> <!-- End Matomo --> </div> </body> </html>
